generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Product {
    id              String            @id @default(uuid())
    title           String
    price           Float
    rating          Float             @default(0)
    genre           String
    category        String
    image           String
    description     String
    support         String            @default("PC")
    createdAt       DateTime          @default(now())
    updatedAt       DateTime          @updatedAt
    orderedProducts OrderedProducts[]
}

model Code {
    id         String   @id @default(uuid())
    code       String
    discount   Float
    assignedTo String
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt
}

model Order {
    id            String            @id @default(uuid())
    name          String
    email         String
    cardNumber    String
    expiry        String
    cvv           String
    phoneNumber   String
    paymentMethod String
    items         OrderedProducts[]

    code       String
    total      Float
    assignedTo String
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt
}

model OrderedProducts {
    id        String   @id @default(uuid())
    orderId   String
    productId String
    quantity  Int
    order     Order    @relation(fields: [orderId], references: [id])
    product   Product  @relation(fields: [productId], references: [id])
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
