generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Product {
    id              Int               @id @default(autoincrement())
    title           String
    price           Float
    rating          Float             @default(0)
    genre           String
    category        Category
    image           String
    description     String            @db.Text
    support         String            @default("PC")
    createdAt       DateTime          @default(now())
    updatedAt       DateTime          @updatedAt
    orderedProducts OrderedProducts[]
}

enum Category {
    Rio_De_Janeiro
    Euphoria
    Jakarta
    Bogotta
    Doha
    Havana
}

model Code {
    id         Int      @id @default(autoincrement())
    code       String
    discount   Float
    role String
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt
}

model Order {
    id            Int            @id @default(autoincrement())
    customerName  String
    customerEmail String
    cardNumber    String?
    expiry        String?
    cvv           String?
    phoneNumber   String?
    paymentMethod String?
    items         OrderedProducts[]

    code        String
    totalAmount Float
    assignedTo  String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
}

model OrderedProducts {
    id        Int @id @default(autoincrement())
    orderId   Int
    productId Int
    quantity  Int
    order     Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
    product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
